#!/bin/sh

# Function to enable a service
enable_service() {
  if [ -e "/etc/sv/$1" ]; then
    ln -s /etc/sv/"$1" /var/service/
    echo "Enabled service: $1"
  else
    echo "Service $1 not found."
  fi
}

# Function to disable a service
disable_service() {
  if [ -L "/var/service/$1" ]; then
    rm /var/service/"$1"
    echo "Disabled service: $1"
  else
    echo "Service $1 is not enabled."
  fi
}

# Function to show the status of a service
show_status() {
  if [ -L "/var/service/$1" ]; then
    echo "Service $1 is enabled."
  else
    echo "Service $1 is disabled."
  fi
}

# Function to list all services
list_services() {
  for service in /etc/sv/*; do
    service_name=$(basename "$service")
    if [ -L "/var/service/$service_name" ]; then
      echo "Service $service_name is enabled."
    else
      echo "Service $service_name is disabled."
    fi
  done
}

# Main script
case "$1" in
  "enable")
    enable_service "$2"
    ;;
  "disable")
    disable_service "$2"
    ;;
  "status")
    show_status "$2"
    ;;
  "list")
    list_services
    ;;
  *)
    echo "Usage: $0 {enable|disable|status|list} [service_name]"
    exit 1
    ;;
esac

exit 0

